[{"name":"/vitualdoc","nodes":[{"id":"1d174a5f-cfed-a7a3-2a55-5fab52a84273","type":"Page","parameters":{},"ports":[],"children":[{"id":"07b609df-8a58-88cb-4aa4-14a70177a836","type":"Group","parameters":{"sizeMode":"explicit","height":{"value":85,"unit":"%"}},"ports":[],"children":[{"id":"036fcd68-5a70-645c-ca8f-e045e3b14b06","type":"Group","parameters":{"position":"absolute","backgroundColor":"White","sizeMode":"explicit","visible":true,"mixBlendMode":"luminosity","opacity":1,"zIndex":1,"mounted":true},"ports":[],"children":[]},{"id":"4e367098-08f5-6726-50ff-a2ad81907cc3","type":"Group","parameters":{"clip":true,"scrollEnabled":false,"position":"relative","mounted":true},"ports":[],"children":[{"id":"5c2ae781-189a-30d1-baa7-c7bb3ac30b35","type":"Group","parameters":{"clip":false,"scrollEnabled":true,"sizeMode":"explicit","width":{"value":100,"unit":"%","isFixed":false},"position":"relative","maxHeight":{"value":100,"unit":"%"}},"ports":[],"children":[{"id":"89b22c7b-323c-ff49-0851-28904bd13c08","type":"Text","parameters":{"sizeMode":"explicit","text":"Bonjour, je me nomme George.\nComment puis-je vous aider.","fontSize":{"value":48,"unit":"px"},"marginLeft":{"value":24,"unit":"px"},"marginRight":{"value":24,"unit":"px"},"marginTop":{"value":24,"unit":"px"},"marginBottom":{"value":24,"unit":"px"},"position":"absolute","mounted":true,"wordBreak":"normal"},"ports":[],"children":[]}]},{"id":"1d7ce76f-00d9-db44-5071-963e1724f867","type":"Group","parameters":{"sizeMode":"explicit","boxShadowEnabled":true,"boxShadowOffsetY":{"value":5,"unit":"px"},"boxShadowInset":true,"paddingLeft":{"value":24,"unit":"px"},"paddingRight":{"value":24,"unit":"px"},"height":{"value":15,"unit":"%"}},"ports":[],"children":[{"id":"c4ad43dc-9db5-234a-7349-5f38381a9318","type":"net.noodl.controls.button","parameters":{"useLabel":true,"textStyle":"Title Small","label":"Cliquer ici pour envoyé un  message","fontSize":{"value":48,"unit":"px"},"alignX":"center","marginTop":{"value":12,"unit":"px"},"marginBottom":{"value":12,"unit":"px"},"sizeMode":"explicit","backgroundColor":"Success","height":{"value":60,"unit":"px"},"width":{"value":90,"unit":"%"}},"ports":[],"children":[]}]}]},{"id":"73000e68-6a00-3d2d-f70f-c74044b7628b","type":"Group","parameters":{"position":"absolute"},"ports":[],"children":[{"id":"7d70da47-57fd-719f-98f8-57f1cf58bfdc","type":"Group","parameters":{"flexDirection":"row","paddingLeft":{"value":24,"unit":"px"},"paddingTop":{"value":24,"unit":"px"},"paddingRight":{"value":24,"unit":"px"},"paddingBottom":{"value":24,"unit":"px"},"borderStyle":"none","width":{"value":100,"unit":"%","isFixed":true},"height":{"value":100,"unit":"%","isFixed":false},"boxShadowEnabled":true,"boxShadowInset":true,"boxShadowOffsetX":{"value":0,"unit":"px"},"boxShadowOffsetY":{"value":5,"unit":"px"}},"ports":[],"children":[{"id":"3e1acacc-8912-28f8-9072-ddbc28bbcb5f","type":"Group","parameters":{},"ports":[],"children":[{"id":"20b8fdb7-3285-0f36-2e25-0f8b09e5c02b","type":"net.noodl.controls.textinput","parameters":{"fontFamily":"AtkinsonHyperlegibleNext-SemiBold.otf","fontSize":{"value":48,"unit":"px"},"type":"textArea","label":"Entrer votre message ici ","labelfontFamily":"AtkinsonHyperlegibleNext-Medium.otf","labelfontSize":{"value":48,"unit":"px"},"labelcolor":"#000000","placeholder":"cliquer ici pour ouvrir le clavier","width":{"value":100,"unit":"%","isFixed":false},"sizeMode":"explicit","color":"Black","height":{"value":100,"unit":"%"}},"ports":[],"children":[]}]},{"id":"c898df09-6a31-b7c3-b9f4-d5ef43bfdb91","type":"Group","parameters":{"sizeMode":"contentWidth","justifyContent":"space-between","marginLeft":{"value":24,"unit":"px"}},"ports":[],"children":[{"id":"23b8db3f-ee5a-9f24-095e-1fde84863866","type":"Group","parameters":{"sizeMode":"contentSize","flexDirection":"column","justifyContent":"flex-end"},"ports":[],"children":[{"id":"ba06bb3a-8dc5-7e55-0f7e-ac5a15686f5c","type":"Group","parameters":{"alignItems":"center","sizeMode":"contentHeight"},"ports":[],"children":[{"id":"a6c490b1-45c0-81a4-2ade-97ec73bc3237","type":"Text","parameters":{"text":"Annulé","sizeMode":"contentSize","fontFamily":"AtkinsonHyperlegibleNext-Medium.otf","fontSize":{"value":48,"unit":"px"}},"ports":[],"children":[]}]},{"id":"23454ed6-4840-4c4b-5247-1c3b9d8da555","type":"net.noodl.controls.button","parameters":{"label":"","fontFamily":"AtkinsonHyperlegibleNext-Bold.otf","fontSize":{"value":48,"unit":"px"},"useLabel":false,"useIcon":true,"iconIconSource":{"class":"material-icons","code":"send","codeAsClass":false},"iconSize":{"value":96,"unit":"px"},"marginRight":{"value":0,"unit":"px"},"width":{"value":100,"unit":"%","isFixed":true},"sizeMode":"contentSize","alignX":"center","backgroundColor":"Danger"},"ports":[],"children":[]}]},{"id":"95b88fd0-1ef8-5a25-a5ef-849612f2b42a","type":"Group","parameters":{"sizeMode":"contentSize","flexDirection":"column","justifyContent":"flex-end"},"ports":[],"children":[{"id":"75763c12-c393-0216-9110-1ce5243746f4","type":"Group","parameters":{"alignItems":"center","sizeMode":"contentHeight"},"ports":[],"children":[{"id":"cc45638a-6792-7958-b2b1-5de67d459021","type":"Text","parameters":{"text":"Envoyé","sizeMode":"contentSize","fontFamily":"AtkinsonHyperlegibleNext-Medium.otf","fontSize":{"value":48,"unit":"px"}},"ports":[],"children":[]}]},{"id":"6fa36d1d-3d77-86b3-0f8a-d65082b39ec3","type":"net.noodl.controls.button","parameters":{"label":"","fontFamily":"AtkinsonHyperlegibleNext-Bold.otf","fontSize":{"value":48,"unit":"px"},"useLabel":false,"useIcon":true,"iconIconSource":{"class":"material-icons","code":"send","codeAsClass":false},"iconSize":{"value":96,"unit":"px"},"marginRight":{"value":0,"unit":"px"},"width":{"value":100,"unit":"%","isFixed":true},"sizeMode":"contentSize","alignX":"center","backgroundColor":"Success"},"ports":[],"children":[]}]}]}]}]}]},{"id":"154afaeb-6d8d-8223-c300-b31cc38df621","type":"/App component/Mouv ","parameters":{},"ports":[],"children":[]}]},{"id":"eb5afe5f-35f2-8f39-e178-efdbff1613d8","type":"PageInputs","parameters":{"queryParams":"url origin"},"ports":[],"children":[]},{"id":"449855cb-0e1b-cc5d-4777-0700db456d50","type":"JavaScriptFunction","parameters":{"functionScript":"/**\r\n * @role Envoie une requête POST au webhook n8n spécifié.\r\n * @param {object} Inputs.Data - Données à envoyer dans le body (JSON).\r\n */\r\nconst data = Inputs.Data;\r\nif (!data) {\r\n    Outputs.Failure(\"Aucune donnée à envoyer (Inputs.Data manquant)\");\r\n    return;\r\n}\r\n\r\nconst WEBHOOK_URL = \"https://n8n-dev.neosenior.fr/webhook/3d7d3cee-9217-45be-9c07-11d4fa17a37a\";\r\n\r\n(async () => {\r\n    try {\r\n        const response = await fetch(WEBHOOK_URL, {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify(data)\r\n        });\r\n\r\n        if (!response.ok) {\r\n            Outputs.Failure(`Erreur HTTP ${response.status}`);\r\n            return;\r\n        }\r\n\r\n        // On tente de lire la réponse JSON, sinon texte brut\r\n        let result;\r\n        try {\r\n            result = await response.json();\r\n        } catch {\r\n            result = await response.text();\r\n        }\r\n\r\n        Outputs.Response = result;\r\n        Outputs.Success();\r\n    } catch (err) {\r\n        Outputs.Failure(\"Erreur lors de l'appel au webhook : \" + err.message);\r\n    }\r\n})();\r\n"},"ports":[{"name":"in-Data","displayName":"Data","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"*","group":"Outputs","index":6},{"name":"out-Response","displayName":"Response","plug":"output","type":"*","group":"Outputs","index":7}],"children":[]},{"id":"f477dca3-f8de-a8ef-3364-9b2b3ff1dbe4","type":"NewModel","parameters":{"properties":"message_user","type-message_user":"string"},"ports":[],"children":[]},{"id":"bc7a38e0-077e-2b08-4aad-0189cb045303","type":"JavaScriptFunction","parameters":{"functionScript":"/**\r\n * @role Extrait la chaîne de caractères \"output\" d'un objet reçu du webhook n8n pour affichage dans un composant UI Text.\r\n * @param {object} Inputs.output - Objet contenant la clé \"output\" (string).\r\n * @output {string} Outputs.Text - Le texte à afficher dans le composant UI Text.\r\n */\r\nconst outputObj = Inputs.output;\r\nif (!outputObj || typeof outputObj.output !== \"string\") {\r\n    Outputs.Failure(\"Entrée 'output.output' manquante ou invalide\");\r\n    return;\r\n}\r\n\r\nOutputs.Text = outputObj.output;\r\nOutputs.Success();\r\n"},"ports":[{"name":"in-output","displayName":"output","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-Text","displayName":"Text","plug":"output","type":"*","group":"Outputs","index":6},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"*","group":"Outputs","index":7}],"children":[]},{"id":"7cb40e64-63a6-0a2e-03d1-e104766e1a16","type":"Collection2","parameters":{},"ports":[],"children":[]},{"id":"af6ca897-f55b-815d-89d2-51a272dc9943","type":"SetModelProperties","parameters":{"properties":"message","type-message":"string"},"ports":[],"children":[]},{"id":"c9bbfc68-6322-7141-15bc-7c578ff9587f","type":"JavaScriptFunction","parameters":{"functionScript":"/**\r\n * @role Extrait l'id du premier objet d'un tableau reçu en entrée.\r\n * @param {Array} Inputs.items - Tableau d'objets contenant une propriété \"id\".\r\n * @output {string} Outputs.Id - L'id du premier objet du tableau.\r\n */\r\nconst items = Inputs.items;\r\nif (!Array.isArray(items) || items.length === 0) {\r\n    Outputs.Failure(\"Entrée 'items' vide ou non valide (tableau attendu)\");\r\n    return;\r\n}\r\n\r\nconst first = items[0];\r\nif (!first || typeof first.id !== \"string\") {\r\n    Outputs.Failure(\"Propriété 'id' manquante ou invalide dans le premier objet\");\r\n    return;\r\n}\r\n\r\nOutputs.Id = first.id;\r\nOutputs.Success();\r\n"},"ports":[{"name":"in-items","displayName":"items","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-Id","displayName":"Id","plug":"output","type":"*","group":"Outputs","index":6},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"*","group":"Outputs","index":7}],"children":[]},{"id":"d89e874b-3bf2-3729-c114-87809c70ad34","type":"Model2","parameters":{},"ports":[],"children":[]},{"id":"678af282-46e5-d0f9-3f80-94821130dbd2","type":"Static Data","parameters":{"type":"json","json":"[\r\n  {\r\n  \"nom\": \"John\",\r\n  \"email\": \"dupont@example.com\",\r\n  \"age\": 92,\r\n  \"message\": \"bonjour\"\r\n  }\r\n]"},"ports":[],"children":[]},{"id":"632c8f6c-8557-ba6c-13a6-9e70bfc5069b","type":"CollectionNew","parameters":{},"ports":[],"children":[]},{"id":"8e7b9145-74ea-ffdc-3849-ba82be49076c","type":"PageInputs","parameters":{"queryParams":"url origin"},"ports":[],"children":[]},{"id":"5ea34180-b5e3-19b0-736c-c6cd28418b48","type":"States","parameters":{"states":"edit message,read message","currentState":"read message","values":"edit,read","type-edit":"boolean","value-edit message-edit":100,"value-read message-edit":false,"type-read":"boolean","value-read message-read":true},"ports":[],"children":[]},{"id":"e1aec943-015c-6cf5-d85c-f6f7161d1005","type":"States","parameters":{"values":"opacity","type-opacity":"number","states":"1,0","value-1-opacity":1,"value-0-opacity":0,"currentState":"0","transitiondef-0":{"curve":[0.65,-0.01,1,1],"dur":1000,"delay":0},"transitiondef-1":{"curve":[0,0,0.13,0.96],"dur":300,"delay":0}},"ports":[],"children":[]},{"id":"d9c6a503-4058-f4aa-6fcc-9ad579d995d1","type":"Timer","parameters":{"duration":300},"ports":[],"children":[]},{"id":"c77159e0-4bd5-5077-92e4-704635d980aa","type":"States","parameters":{"values":"opacity","type-opacity":"number","states":"1,0","value-1-opacity":1,"value-0-opacity":0,"currentState":"0","transitiondef-0":{"curve":[0.65,-0.01,1,1],"dur":1000,"delay":0},"transitiondef-1":{"curve":[0,0,0.13,0.96],"dur":300,"delay":0}},"ports":[],"children":[]},{"id":"3c22ad62-6232-2086-769a-5ed3e32a3dd0","type":"Timer","parameters":{"duration":300},"ports":[],"children":[]}],"connections":[{"sourceId":"449855cb-0e1b-cc5d-4777-0700db456d50","sourcePort":"out-Success","targetId":"f477dca3-f8de-a8ef-3364-9b2b3ff1dbe4","targetPort":"new"},{"sourceId":"449855cb-0e1b-cc5d-4777-0700db456d50","sourcePort":"out-Response","targetId":"bc7a38e0-077e-2b08-4aad-0189cb045303","targetPort":"in-output"},{"sourceId":"bc7a38e0-077e-2b08-4aad-0189cb045303","sourcePort":"out-Text","targetId":"89b22c7b-323c-ff49-0851-28904bd13c08","targetPort":"text"},{"sourceId":"449855cb-0e1b-cc5d-4777-0700db456d50","sourcePort":"out-Success","targetId":"bc7a38e0-077e-2b08-4aad-0189cb045303","targetPort":"run"},{"sourceId":"7cb40e64-63a6-0a2e-03d1-e104766e1a16","sourcePort":"items","targetId":"449855cb-0e1b-cc5d-4777-0700db456d50","targetPort":"in-Data"},{"sourceId":"20b8fdb7-3285-0f36-2e25-0f8b09e5c02b","sourcePort":"onTextChanged","targetId":"af6ca897-f55b-815d-89d2-51a272dc9943","targetPort":"prop-message"},{"sourceId":"7cb40e64-63a6-0a2e-03d1-e104766e1a16","sourcePort":"items","targetId":"c9bbfc68-6322-7141-15bc-7c578ff9587f","targetPort":"in-items"},{"sourceId":"c9bbfc68-6322-7141-15bc-7c578ff9587f","sourcePort":"out-Id","targetId":"af6ca897-f55b-815d-89d2-51a272dc9943","targetPort":"modelId"},{"sourceId":"c9bbfc68-6322-7141-15bc-7c578ff9587f","sourcePort":"out-Success","targetId":"af6ca897-f55b-815d-89d2-51a272dc9943","targetPort":"store"},{"sourceId":"6fa36d1d-3d77-86b3-0f8a-d65082b39ec3","sourcePort":"onClick","targetId":"c9bbfc68-6322-7141-15bc-7c578ff9587f","targetPort":"run"},{"sourceId":"af6ca897-f55b-815d-89d2-51a272dc9943","sourcePort":"stored","targetId":"449855cb-0e1b-cc5d-4777-0700db456d50","targetPort":"run"},{"sourceId":"f477dca3-f8de-a8ef-3364-9b2b3ff1dbe4","sourcePort":"id","targetId":"d89e874b-3bf2-3729-c114-87809c70ad34","targetPort":"modelId"},{"sourceId":"bc7a38e0-077e-2b08-4aad-0189cb045303","sourcePort":"out-Success","targetId":"20b8fdb7-3285-0f36-2e25-0f8b09e5c02b","targetPort":"clear"},{"sourceId":"bc7a38e0-077e-2b08-4aad-0189cb045303","sourcePort":"out-Text","targetId":"f477dca3-f8de-a8ef-3364-9b2b3ff1dbe4","targetPort":"prop-message_user"},{"sourceId":"678af282-46e5-d0f9-3f80-94821130dbd2","sourcePort":"items","targetId":"632c8f6c-8557-ba6c-13a6-9e70bfc5069b","targetPort":"items"},{"sourceId":"632c8f6c-8557-ba6c-13a6-9e70bfc5069b","sourcePort":"id","targetId":"7cb40e64-63a6-0a2e-03d1-e104766e1a16","targetPort":"collectionId"},{"sourceId":"1d174a5f-cfed-a7a3-2a55-5fab52a84273","sourcePort":"didMount","targetId":"632c8f6c-8557-ba6c-13a6-9e70bfc5069b","targetPort":"new"},{"sourceId":"8e7b9145-74ea-ffdc-3849-ba82be49076c","sourcePort":"pm-url origin","targetId":"154afaeb-6d8d-8223-c300-b31cc38df621","targetPort":"url origine"},{"sourceId":"5ea34180-b5e3-19b0-736c-c6cd28418b48","sourcePort":"read","targetId":"4e367098-08f5-6726-50ff-a2ad81907cc3","targetPort":"mounted"},{"sourceId":"e1aec943-015c-6cf5-d85c-f6f7161d1005","sourcePort":"reached-1","targetId":"d9c6a503-4058-f4aa-6fcc-9ad579d995d1","targetPort":"start"},{"sourceId":"1d174a5f-cfed-a7a3-2a55-5fab52a84273","sourcePort":"didMount","targetId":"e1aec943-015c-6cf5-d85c-f6f7161d1005","targetPort":"to-0"},{"sourceId":"e1aec943-015c-6cf5-d85c-f6f7161d1005","sourcePort":"opacity","targetId":"036fcd68-5a70-645c-ca8f-e045e3b14b06","targetPort":"opacity"},{"sourceId":"d9c6a503-4058-f4aa-6fcc-9ad579d995d1","sourcePort":"timerFinished","targetId":"e1aec943-015c-6cf5-d85c-f6f7161d1005","targetPort":"to-0"},{"sourceId":"c4ad43dc-9db5-234a-7349-5f38381a9318","sourcePort":"onClick","targetId":"e1aec943-015c-6cf5-d85c-f6f7161d1005","targetPort":"to-1"},{"sourceId":"c77159e0-4bd5-5077-92e4-704635d980aa","sourcePort":"reached-1","targetId":"3c22ad62-6232-2086-769a-5ed3e32a3dd0","targetPort":"start"},{"sourceId":"3c22ad62-6232-2086-769a-5ed3e32a3dd0","sourcePort":"timerFinished","targetId":"c77159e0-4bd5-5077-92e4-704635d980aa","targetPort":"to-0"},{"sourceId":"23454ed6-4840-4c4b-5247-1c3b9d8da555","sourcePort":"onClick","targetId":"c77159e0-4bd5-5077-92e4-704635d980aa","targetPort":"to-1"},{"sourceId":"6fa36d1d-3d77-86b3-0f8a-d65082b39ec3","sourcePort":"onClick","targetId":"c77159e0-4bd5-5077-92e4-704635d980aa","targetPort":"to-1"},{"sourceId":"c77159e0-4bd5-5077-92e4-704635d980aa","sourcePort":"opacity","targetId":"036fcd68-5a70-645c-ca8f-e045e3b14b06","targetPort":"opacity"},{"sourceId":"d9c6a503-4058-f4aa-6fcc-9ad579d995d1","sourcePort":"timerStarted","targetId":"5ea34180-b5e3-19b0-736c-c6cd28418b48","targetPort":"to-edit message"},{"sourceId":"3c22ad62-6232-2086-769a-5ed3e32a3dd0","sourcePort":"timerStarted","targetId":"5ea34180-b5e3-19b0-736c-c6cd28418b48","targetPort":"to-read message"},{"sourceId":"5ea34180-b5e3-19b0-736c-c6cd28418b48","sourcePort":"edit","targetId":"73000e68-6a00-3d2d-f70f-c74044b7628b","targetPort":"mounted"}],"ports":[],"roots":["1d174a5f-cfed-a7a3-2a55-5fab52a84273"]}]