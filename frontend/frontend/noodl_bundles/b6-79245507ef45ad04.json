[{"name":"/vitualdoc","nodes":[{"id":"1d174a5f-cfed-a7a3-2a55-5fab52a84273","type":"Page","parameters":{},"ports":[],"children":[{"id":"7d70da47-57fd-719f-98f8-57f1cf58bfdc","type":"Group","parameters":{"flexDirection":"row"},"ports":[],"children":[{"id":"07b609df-8a58-88cb-4aa4-14a70177a836","type":"Group","parameters":{"sizeMode":"explicit"},"ports":[],"children":[{"id":"4e367098-08f5-6726-50ff-a2ad81907cc3","type":"Group","parameters":{"clip":true,"sizeMode":"explicit","scrollEnabled":true,"position":"relative"},"ports":[],"children":[{"id":"89b22c7b-323c-ff49-0851-28904bd13c08","type":"Text","parameters":{"sizeMode":"contentHeight","text":"Bonjours, Je suis George ","fontSize":{"value":48,"unit":"px"},"marginLeft":{"value":24,"unit":"px"},"marginRight":{"value":24,"unit":"px"},"marginTop":{"value":24,"unit":"px"},"marginBottom":{"value":24,"unit":"px"},"position":"absolute"},"ports":[],"children":[]}]},{"id":"20b8fdb7-3285-0f36-2e25-0f8b09e5c02b","type":"net.noodl.controls.textinput","parameters":{"marginTop":{"value":24,"unit":"px"},"marginBottom":{"value":24,"unit":"px"},"marginRight":{"value":24,"unit":"px"},"marginLeft":{"value":24,"unit":"px"},"fontFamily":"AtkinsonHyperlegibleNext-SemiBold.otf","fontSize":{"value":48,"unit":"px"},"type":"textArea","height":{"value":100,"unit":"px"},"label":"Entrer votre message ici ","labelfontFamily":"AtkinsonHyperlegibleNext-Medium.otf","labelfontSize":{"value":48,"unit":"px"},"labelcolor":"#000000","placeholder":"cliquer ici pour ouvrir le clavier","width":{"value":100,"unit":"%","isFixed":true}},"ports":[],"children":[]}]},{"id":"dc44eca8-edb2-1ea5-3313-7ae3a682d331","type":"Group","parameters":{"flexDirection":"row","sizeMode":"contentWidth","justifyContent":"space-between","marginBottom":{"value":0,"unit":"px"}},"ports":[],"children":[{"id":"95b88fd0-1ef8-5a25-a5ef-849612f2b42a","type":"Group","parameters":{"alignItems":"center","sizeMode":"contentSize","flexDirection":"row","alignY":"bottom"},"ports":[],"children":[{"id":"75763c12-c393-0216-9110-1ce5243746f4","type":"Group","parameters":{},"ports":[],"children":[{"id":"cc45638a-6792-7958-b2b1-5de67d459021","type":"Text","parameters":{"text":"Envoyé","sizeMode":"contentSize","fontFamily":"AtkinsonHyperlegibleNext-Medium.otf","fontSize":{"value":48,"unit":"px"}},"ports":[],"children":[]},{"id":"b6515d1e-535e-d0d5-9c40-f87df3b0adcc","type":"Text","parameters":{"text":"le message","sizeMode":"contentSize","fontFamily":"AtkinsonHyperlegibleNext-Medium.otf","fontSize":{"value":48,"unit":"px"}},"ports":[],"children":[]}]},{"id":"f1a777d2-75a3-b778-9b96-223197260e6d","type":"net.noodl.visual.icon","parameters":{"iconIconSource":{"class":"material-icons","code":"chevron_right","codeAsClass":false},"iconSize":{"value":96,"unit":"px"},"iconColor":"Black","paddingLeft":{"value":0,"unit":"px"},"paddingRight":{"value":0,"unit":"px"},"paddingBottom":{"value":0,"unit":"px"},"paddingTop":{"value":0,"unit":"px"}},"ports":[],"children":[]},{"id":"6fa36d1d-3d77-86b3-0f8a-d65082b39ec3","type":"net.noodl.controls.button","parameters":{"label":"","fontFamily":"AtkinsonHyperlegibleNext-Bold.otf","fontSize":{"value":48,"unit":"px"},"useLabel":false,"sizeMode":"contentSize","useIcon":true,"iconIconSource":{"class":"material-icons","code":"send","codeAsClass":false},"iconSize":{"value":96,"unit":"px"},"marginRight":{"value":24,"unit":"px"},"marginLeft":{"value":-1,"unit":"px"}},"ports":[],"children":[]}]}]}]},{"id":"154afaeb-6d8d-8223-c300-b31cc38df621","type":"/App component/Mouv ","parameters":{},"ports":[],"children":[]}]},{"id":"eb5afe5f-35f2-8f39-e178-efdbff1613d8","type":"PageInputs","parameters":{"queryParams":"url origin"},"ports":[],"children":[]},{"id":"449855cb-0e1b-cc5d-4777-0700db456d50","type":"JavaScriptFunction","parameters":{"functionScript":"/**\r\n * @role Envoie une requête POST au webhook n8n spécifié.\r\n * @param {object} Inputs.Data - Données à envoyer dans le body (JSON).\r\n */\r\nconst data = Inputs.Data;\r\nif (!data) {\r\n    Outputs.Failure(\"Aucune donnée à envoyer (Inputs.Data manquant)\");\r\n    return;\r\n}\r\n\r\nconst WEBHOOK_URL = \"https://n8n-dev.neosenior.fr/webhook/3d7d3cee-9217-45be-9c07-11d4fa17a37a\";\r\n\r\n(async () => {\r\n    try {\r\n        const response = await fetch(WEBHOOK_URL, {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify(data)\r\n        });\r\n\r\n        if (!response.ok) {\r\n            Outputs.Failure(`Erreur HTTP ${response.status}`);\r\n            return;\r\n        }\r\n\r\n        // On tente de lire la réponse JSON, sinon texte brut\r\n        let result;\r\n        try {\r\n            result = await response.json();\r\n        } catch {\r\n            result = await response.text();\r\n        }\r\n\r\n        Outputs.Response = result;\r\n        Outputs.Success();\r\n    } catch (err) {\r\n        Outputs.Failure(\"Erreur lors de l'appel au webhook : \" + err.message);\r\n    }\r\n})();\r\n"},"ports":[{"name":"in-Data","displayName":"Data","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"*","group":"Outputs","index":6},{"name":"out-Response","displayName":"Response","plug":"output","type":"*","group":"Outputs","index":7}],"children":[]},{"id":"f477dca3-f8de-a8ef-3364-9b2b3ff1dbe4","type":"NewModel","parameters":{"properties":"message_user","type-message_user":"string"},"ports":[],"children":[]},{"id":"bc7a38e0-077e-2b08-4aad-0189cb045303","type":"JavaScriptFunction","parameters":{"functionScript":"/**\r\n * @role Extrait la chaîne de caractères \"output\" d'un objet reçu du webhook n8n pour affichage dans un composant UI Text.\r\n * @param {object} Inputs.output - Objet contenant la clé \"output\" (string).\r\n * @output {string} Outputs.Text - Le texte à afficher dans le composant UI Text.\r\n */\r\nconst outputObj = Inputs.output;\r\nif (!outputObj || typeof outputObj.output !== \"string\") {\r\n    Outputs.Failure(\"Entrée 'output.output' manquante ou invalide\");\r\n    return;\r\n}\r\n\r\nOutputs.Text = outputObj.output;\r\nOutputs.Success();\r\n"},"ports":[{"name":"in-output","displayName":"output","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-Text","displayName":"Text","plug":"output","type":"*","group":"Outputs","index":6},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"*","group":"Outputs","index":7}],"children":[]},{"id":"7cb40e64-63a6-0a2e-03d1-e104766e1a16","type":"Collection2","parameters":{},"ports":[],"children":[]},{"id":"af6ca897-f55b-815d-89d2-51a272dc9943","type":"SetModelProperties","parameters":{"properties":"message","type-message":"string"},"ports":[],"children":[]},{"id":"c9bbfc68-6322-7141-15bc-7c578ff9587f","type":"JavaScriptFunction","parameters":{"functionScript":"/**\r\n * @role Extrait l'id du premier objet d'un tableau reçu en entrée.\r\n * @param {Array} Inputs.items - Tableau d'objets contenant une propriété \"id\".\r\n * @output {string} Outputs.Id - L'id du premier objet du tableau.\r\n */\r\nconst items = Inputs.items;\r\nif (!Array.isArray(items) || items.length === 0) {\r\n    Outputs.Failure(\"Entrée 'items' vide ou non valide (tableau attendu)\");\r\n    return;\r\n}\r\n\r\nconst first = items[0];\r\nif (!first || typeof first.id !== \"string\") {\r\n    Outputs.Failure(\"Propriété 'id' manquante ou invalide dans le premier objet\");\r\n    return;\r\n}\r\n\r\nOutputs.Id = first.id;\r\nOutputs.Success();\r\n"},"ports":[{"name":"in-items","displayName":"items","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-Id","displayName":"Id","plug":"output","type":"*","group":"Outputs","index":6},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"*","group":"Outputs","index":7}],"children":[]},{"id":"d89e874b-3bf2-3729-c114-87809c70ad34","type":"Model2","parameters":{},"ports":[],"children":[]},{"id":"678af282-46e5-d0f9-3f80-94821130dbd2","type":"Static Data","parameters":{"type":"json","json":"[\r\n  {\r\n  \"nom\": \"John\",\r\n  \"email\": \"dupont@example.com\",\r\n  \"age\": 92,\r\n  \"message\": \"bonjour\"\r\n  }\r\n]"},"ports":[],"children":[]},{"id":"632c8f6c-8557-ba6c-13a6-9e70bfc5069b","type":"CollectionNew","parameters":{},"ports":[],"children":[]},{"id":"8e7b9145-74ea-ffdc-3849-ba82be49076c","type":"PageInputs","parameters":{"queryParams":"url origin"},"ports":[],"children":[]}],"connections":[{"sourceId":"449855cb-0e1b-cc5d-4777-0700db456d50","sourcePort":"out-Success","targetId":"f477dca3-f8de-a8ef-3364-9b2b3ff1dbe4","targetPort":"new"},{"sourceId":"449855cb-0e1b-cc5d-4777-0700db456d50","sourcePort":"out-Response","targetId":"bc7a38e0-077e-2b08-4aad-0189cb045303","targetPort":"in-output"},{"sourceId":"bc7a38e0-077e-2b08-4aad-0189cb045303","sourcePort":"out-Text","targetId":"89b22c7b-323c-ff49-0851-28904bd13c08","targetPort":"text"},{"sourceId":"449855cb-0e1b-cc5d-4777-0700db456d50","sourcePort":"out-Success","targetId":"bc7a38e0-077e-2b08-4aad-0189cb045303","targetPort":"run"},{"sourceId":"7cb40e64-63a6-0a2e-03d1-e104766e1a16","sourcePort":"items","targetId":"449855cb-0e1b-cc5d-4777-0700db456d50","targetPort":"in-Data"},{"sourceId":"20b8fdb7-3285-0f36-2e25-0f8b09e5c02b","sourcePort":"onTextChanged","targetId":"af6ca897-f55b-815d-89d2-51a272dc9943","targetPort":"prop-message"},{"sourceId":"7cb40e64-63a6-0a2e-03d1-e104766e1a16","sourcePort":"items","targetId":"c9bbfc68-6322-7141-15bc-7c578ff9587f","targetPort":"in-items"},{"sourceId":"c9bbfc68-6322-7141-15bc-7c578ff9587f","sourcePort":"out-Id","targetId":"af6ca897-f55b-815d-89d2-51a272dc9943","targetPort":"modelId"},{"sourceId":"c9bbfc68-6322-7141-15bc-7c578ff9587f","sourcePort":"out-Success","targetId":"af6ca897-f55b-815d-89d2-51a272dc9943","targetPort":"store"},{"sourceId":"6fa36d1d-3d77-86b3-0f8a-d65082b39ec3","sourcePort":"onClick","targetId":"c9bbfc68-6322-7141-15bc-7c578ff9587f","targetPort":"run"},{"sourceId":"af6ca897-f55b-815d-89d2-51a272dc9943","sourcePort":"stored","targetId":"449855cb-0e1b-cc5d-4777-0700db456d50","targetPort":"run"},{"sourceId":"f477dca3-f8de-a8ef-3364-9b2b3ff1dbe4","sourcePort":"id","targetId":"d89e874b-3bf2-3729-c114-87809c70ad34","targetPort":"modelId"},{"sourceId":"bc7a38e0-077e-2b08-4aad-0189cb045303","sourcePort":"out-Success","targetId":"20b8fdb7-3285-0f36-2e25-0f8b09e5c02b","targetPort":"clear"},{"sourceId":"bc7a38e0-077e-2b08-4aad-0189cb045303","sourcePort":"out-Text","targetId":"f477dca3-f8de-a8ef-3364-9b2b3ff1dbe4","targetPort":"prop-message_user"},{"sourceId":"678af282-46e5-d0f9-3f80-94821130dbd2","sourcePort":"items","targetId":"632c8f6c-8557-ba6c-13a6-9e70bfc5069b","targetPort":"items"},{"sourceId":"632c8f6c-8557-ba6c-13a6-9e70bfc5069b","sourcePort":"id","targetId":"7cb40e64-63a6-0a2e-03d1-e104766e1a16","targetPort":"collectionId"},{"sourceId":"1d174a5f-cfed-a7a3-2a55-5fab52a84273","sourcePort":"didMount","targetId":"632c8f6c-8557-ba6c-13a6-9e70bfc5069b","targetPort":"new"},{"sourceId":"8e7b9145-74ea-ffdc-3849-ba82be49076c","sourcePort":"pm-url origin","targetId":"154afaeb-6d8d-8223-c300-b31cc38df621","targetPort":"url origine"}],"ports":[],"roots":["1d174a5f-cfed-a7a3-2a55-5fab52a84273"]}]